<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Travel Times • gtfsrouter</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Travel Times">
<meta property="og:description" content="gtfsrouter">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gtfsrouter</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.4.214</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ATFutures/gtfs-router">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="traveltimes_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Travel Times</h1>
                        <h4 class="author">Alexandra Kapp</h4>
            
            <h4 class="date">2021-03-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ATFutures/gtfs-router/blob/master/vignettes/traveltimes.Rmd"><code>vignettes/traveltimes.Rmd</code></a></small>
      <div class="hidden name"><code>traveltimes.Rmd</code></div>

    </div>

    
    
<div id="traveltimes" class="section level1">
<h1 class="hasAnchor">
<a href="#traveltimes" class="anchor"></a>Traveltimes</h1>
<p>Building on the idea if isochrones the function <a href="https://atfutures.github.io/gtfs-router/reference/gtfs_isochrone.html"><code>gtfs_traveltimes()</code></a> calculates travel times from a nominated start station to all other stations. The travel time for a route is selected which has the shortest duration for the minimum possible transfers. The function returns a data frame, each row representing a destination station with information about amount of transfers, start time and duration needed from the start station. As with routing, the function also requires initial extraction of GTFS data and, for faster queries, explicit conversion to <a href="https://atfutures.github.io/gtfs-router/reference/gtfs_timetable.html"><code>gtfs_timetable()</code></a> format.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/berlin_gtfs_to_zip.html">berlin_gtfs_to_zip</a></span> <span class="op">(</span><span class="op">)</span>
<span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span> <span class="op">(</span><span class="op">)</span>, <span class="st">"vbb.zip"</span><span class="op">)</span>
<span class="va">gtfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_gtfs.html">extract_gtfs</a></span> <span class="op">(</span><span class="va">f</span><span class="op">)</span></code></pre></div>
<pre><code>## ▶ Unzipping GTFS archive
✔ Unzipped GTFS archive  
## ▶ Extracting GTFS feed
✔ Extracted GTFS feed 
## ▶ Converting stop times to seconds
✔ Converted stop times to seconds 
## ▶ Converting transfer times to seconds
✔ Converted transfer times to seconds</code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gtfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gtfs_timetable.html">gtfs_timetable</a></span> <span class="op">(</span><span class="va">gtfs</span>, day <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<p>The parameter <code>start_time_limits</code> sets the earliest and latest possible start for desired route travel times. E.g. to get travel times for routes starting between 12 PM and 1 PM the limits should be set as <code>start_time_limits = c(12*3600, 13*3600)</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">from</span> <span class="op">&lt;-</span> <span class="st">"Alexanderplatz"</span>
<span class="va">start_time_limits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">12</span> <span class="op">*</span> <span class="fl">3600</span>, <span class="fl">13</span> <span class="op">*</span> <span class="fl">3600</span><span class="op">)</span>
<span class="va">tt1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gtfs_traveltimes.html">gtfs_traveltimes</a></span><span class="op">(</span><span class="va">gtfs</span>,
                        from <span class="op">=</span> <span class="va">from</span>,
                        start_time_limits <span class="op">=</span> <span class="va">start_time_limits</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tt1</span><span class="op">)</span></code></pre></div>
<pre><code>##   start_time duration ntransfers      stop_id               stop_name stop_lon
## 1   12:03:42 00:14:12          1 060003102223     S Bellevue (Berlin) 13.34710
## 2   12:00:42 00:08:36          0 060003102224     S Bellevue (Berlin) 13.34710
## 3   12:00:42 00:15:06          1 060003103233   S Tiergarten (Berlin) 13.33624
## 4   12:00:42 00:10:42          0 060003103234   S Tiergarten (Berlin) 13.33624
## 5   12:03:42 00:11:18          1 060003201213 S+U Berlin Hauptbahnhof 13.36892
## 6   12:00:42 00:05:54          0 060003201214 S+U Berlin Hauptbahnhof 13.36892
##   stop_lat
## 1 52.51995
## 2 52.51995
## 3 52.51396
## 4 52.51396
## 5 52.52585
## 6 52.52585</code></pre>
<p>With the parameter <code>max_traveltime</code> the maximum travel time can be specified (in seconds). By default it is set to one hour. So the previous query included trips up to one hour travel time:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">setorder</a></span><span class="op">(</span><span class="va">tt1</span>, <span class="op">-</span><span class="st">"duration"</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span></code></pre></div>
<pre><code>##     start_time duration ntransfers      stop_id                  stop_name
## 173   12:00:42 00:53:36          0 060230000841               S Babelsberg
## 663   12:02:24 00:53:30          0 060182002854 S Friedrichshagen (Berlin)
## 180   12:07:54 00:50:36          0 060320003001               S Hegermuhle
##     stop_lon stop_lat
## 173 13.09463 52.39137
## 663 13.62546 52.45709
## 180 13.86679 52.54904</code></pre>
<p>To get trips for the same start point but only up to 30 minutes travel time, set the <code>max_traveltime</code> parameter accordingly:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">max_traveltime</span> <span class="op">&lt;-</span> <span class="fl">30</span> <span class="op">*</span> <span class="fl">60</span> <span class="co"># half hour</span>
<span class="va">tt2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gtfs_traveltimes.html">gtfs_traveltimes</a></span><span class="op">(</span><span class="va">gtfs</span>,
                        from <span class="op">=</span> <span class="va">from</span>,
                        start_time_limits <span class="op">=</span> <span class="va">start_time_limits</span>,
                        max_traveltime <span class="op">=</span> <span class="va">max_traveltime</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">setorder</a></span><span class="op">(</span><span class="va">tt2</span>, <span class="op">-</span><span class="st">"duration"</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span></code></pre></div>
<pre><code>##     start_time duration ntransfers      stop_id                       stop_name
## 268   12:10:00 00:30:00          1 070201033601 S+U Heidelberger Platz (Berlin)
## 36    12:03:30 00:29:48          1 060045102631 S+U Heidelberger Platz (Berlin)
## 257   12:03:42 00:29:48          2 070201024202         U Bismarckstr. (Berlin)
##     stop_lon stop_lat
## 268 13.31184 52.47945
## 36  13.31184 52.47945
## 257 13.30533 52.51154</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Mark Padgham, Marcin Stepniak.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
